(this.webpackJsonpinstagramclone=this.webpackJsonpinstagramclone||[]).push([[0],{28:function(e,a,s){},33:function(e,a,s){"use strict";s.r(a);var t=s(3),n=s(5),c=s.n(n),i=s(21),r=s.n(i),l=(s(28),s(13)),o=s(22),m=s(14),d=s.n(m),j=s(19),u=s(9),b=s(12);b.a.initializeApp({apiKey:"AIzaSyAe6HmLHIfvwzeTDsZbJOxs3akYWu90kp8",authDomain:"instagram-39da0.firebaseapp.com",databaseURL:"https://instagram-39da0-default-rtdb.firebaseio.com",projectId:"instagram-39da0",storageBucket:"instagram-39da0.appspot.com",messagingSenderId:"356197994200",appId:"1:356197994200:web:27d2131b54aab0af6dd1ad",measurementId:"G-0B9BZLGBYC"});var p=b.a.firestore(),g=b.a.auth(),h=b.a.storage(),O=Object(n.createContext)(),x=function(e){var a=c.a.useState(!1),s=Object(u.a)(a,2),n=s[0],i=s[1],r=c.a.useState(null),l=Object(u.a)(r,2),o=l[0],m=l[1],x=c.a.useState(!0),_=Object(u.a)(x,2),v=_[0],f=_[1],N=c.a.useState([]),y=Object(u.a)(N,2),w=y[0],C=y[1],S=function(){var e=Object(j.a)(d.a.mark((function e(a){var s,t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=a.username,t=a.email,n=a.password,e.prev=1,e.next=4,g.createUserWithEmailAndPassword(t,n);case 4:e.sent.user.updateProfile({displayName:s}),i(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(a){return e.apply(this,arguments)}}(),k=function(){var e=Object(j.a)(d.a.mark((function e(a){var s,t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=a.email,t=a.password,e.next=3,g.signInWithEmailAndPassword(s,t);case 3:e.sent,i(!1);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return c.a.useEffect((function(){g.onAuthStateChanged((function(e){m(e),f(!1)})),p.collection("posts").orderBy("currentTime","desc").onSnapshot((function(e){C(e.docs.map((function(e){return{id:e.id,title:e.data().title,image:e.data().image,username:e.data().username}})))}))}),[v]),console.log("Login User:",o),Object(t.jsx)(O.Provider,{value:{model:n,openModel:function(){i(!0)},closeModel:function(){i(!1)},register:S,login:k,user:o,loader:v,logout:function(){g.signOut().then((function(){m(null)})).catch((function(e){console.log(e)}))},create:function(e){console.log("dispalyname",o.displayName);var a=e.title,s=e.image;h.ref("images/".concat(s.name)).put(s).on("state_changed",(function(e){var a=e.bytesTransferred/e.totalBytes*100;console.log(a)}),(function(e){console.log(e)}),(function(){h.ref("images").child(s.name).getDownloadURL().then((function(e){p.collection("posts").add({title:a,image:e,username:o.displayName,currentTime:b.a.firestore.FieldValue.serverTimestamp()})}))}))},posts:w,publishComment:function(e){var a=e.id,s=e.comment;p.collection("posts").doc(a).collection("comments").add({comment:s,username:o.displayName,currentTime:b.a.firestore.FieldValue.serverTimestamp()})}},children:e.children})},_=function(){var e=c.a.useContext(O),a=e.model,s=e.openModel,n=e.user,i=e.loader,r=e.logout;console.log("my model",a);var m=function(){s()},d=function(){r()};return Object(t.jsxs)("div",{className:"navbar",children:[Object(t.jsx)("div",{className:"navbar__first",children:Object(t.jsx)("div",{className:"navbar__first-logo",children:Object(t.jsx)("img",{src:"/images/instagramLogo.png",alt:""})})}),Object(t.jsx)("div",{className:"navbar__middle",children:Object(t.jsxs)("div",{className:"navbar__middle-search",children:[Object(t.jsx)("input",{type:"text",className:"navbar__search",placeholder:"Search"}),Object(t.jsx)(l.d,{className:"searchIcon"})]})}),Object(t.jsxs)("div",{className:"navbar__last",children:[Object(t.jsx)("li",{children:Object(t.jsx)(o.a,{className:"navbar__icons"})}),Object(t.jsx)("li",{children:Object(t.jsx)(l.e,{className:"navbar__icons"})}),Object(t.jsx)("li",{children:Object(t.jsx)(l.b,{className:"navbar__icons"})}),Object(t.jsx)("li",{children:Object(t.jsx)(l.c,{className:"navbar__icons"})}),i?"...":!i&&n?Object(t.jsxs)("li",{children:[n.displayName,"/ ",Object(t.jsx)("span",{onClick:d,children:"logout"})," "]}):Object(t.jsx)("li",{onClick:m,children:"Register/Login"})]})]})},v=s(16),f=s(15),N=function(){var e=c.a.useContext(O),a=e.model,s=e.closeModel,n=e.register,i=e.login,r=c.a.useState({register:!0,login:!1}),l=Object(u.a)(r,2),o=l[0],m=l[1],d=c.a.useState({username:"",email:"",password:""}),j=Object(u.a)(d,2),b=j[0],p=j[1],g=function(e){p(Object(f.a)(Object(f.a)({},b),{},Object(v.a)({},e.target.name,e.target.value)))},h=function(){m(Object(f.a)(Object(f.a)({},o),{},{register:!o.register,login:!o.login}))};return Object(t.jsx)(t.Fragment,{children:a?Object(t.jsx)("div",{className:"model",onClick:function(e){"model"===e.target.getAttribute("class")&&s()},children:Object(t.jsx)("div",{className:"model__container",children:o.register?Object(t.jsx)("div",{className:"model__form",children:Object(t.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log(b),n(b),p({username:"",email:"",password:""})},children:[Object(t.jsx)("div",{className:"model__group",children:Object(t.jsx)("img",{src:"/images/instagramLogo.png",alt:""})}),Object(t.jsx)("div",{className:"model__group",children:Object(t.jsx)("input",{type:"text",name:"username",className:"model__input",placeholder:"Username...",onChange:g,value:b.username,required:!0})}),Object(t.jsx)("div",{className:"model__group",children:Object(t.jsx)("input",{type:"email",name:"email",className:"model__input",placeholder:"Email...",onChange:g,value:b.email,required:!0})}),Object(t.jsx)("div",{className:"model__group",children:Object(t.jsx)("input",{type:"password",name:"password",className:"model__input",placeholder:"Create password...",onChange:g,value:b.password,required:!0})}),Object(t.jsx)("div",{className:"model__group",children:Object(t.jsx)("input",{type:"submit",value:"Register",className:"btn btn-smart"})}),Object(t.jsx)("div",{className:"model__group",children:Object(t.jsxs)("span",{onClick:h,children:["Already have an account ?"," "]})})]})}):Object(t.jsx)("div",{className:"model__form",children:Object(t.jsxs)("form",{onSubmit:function(e){e.preventDefault(),i(b)},children:[Object(t.jsx)("div",{className:"model__group",children:Object(t.jsx)("img",{src:"/images/instagramLogo.png",alt:""})}),Object(t.jsx)("div",{className:"model__group",children:Object(t.jsx)("input",{type:"email",name:"email",className:"model__input",placeholder:"Email...",onChange:g,value:b.email,required:!0})}),Object(t.jsx)("div",{className:"model__group",children:Object(t.jsx)("input",{type:"password",name:"password",className:"model__input",placeholder:"Create password...",onChange:g,value:b.password,required:!0})}),Object(t.jsx)("div",{className:"model__group",children:Object(t.jsx)("input",{type:"submit",value:"Login",className:"btn btn-smart"})}),Object(t.jsx)("div",{className:"model__group",children:Object(t.jsx)("span",{onClick:h,children:"Create a new account ? "})})]})})})}):""})},y=function(){var e=c.a.useState([{id:1,image:"/images/im1.png",name:"himanshi"},{id:2,image:"/images/im2.png",name:"akansha"},{id:3,image:"/images/im3.png",name:"ayushi"},{id:4,image:"/images/fawad1.jpg",name:"fawad2"},{id:5,image:"/images/feroz1.jpg",name:"feroz432"},{id:6,image:"/images/edited.jpg",name:"anamika"},{id:7,image:"/images/imrankhan1.jpg",name:"imran4"},{id:8,image:"/images/imrankhan3.jpg",name:"khan4"},{id:9,image:"/images/imrankhanpost.jpg",name:"alikhan4"}]),a=Object(u.a)(e,2),s=a[0];a[1];return Object(t.jsx)("div",{className:"stories",children:s.map((function(e){return Object(t.jsxs)("div",{className:"stories__info",children:[Object(t.jsx)("div",{className:"stories__img",children:Object(t.jsx)("span",{children:Object(t.jsx)("img",{src:e.image,alt:"user"})})}),Object(t.jsx)("div",{className:"stories__name",children:e.name})]},e.id)}))})},w=function(){var e=Object(n.useContext)(O),a=e.create,s=e.loader,c=e.user,i=Object(n.useState)(""),r=Object(u.a)(i,2),o=r[0],m=r[1],d=Object(n.useState)(""),j=Object(u.a)(d,2),b=j[0],p=j[1];return Object(t.jsx)(t.Fragment,{children:!s&&c?Object(t.jsx)("div",{className:"create",children:Object(t.jsxs)("form",{onSubmit:function(e){e.preventDefault(),a({title:o,image:b}),m(""),p("")},children:[Object(t.jsx)("div",{className:"create__input",children:Object(t.jsx)("input",{type:"text",className:"create__inputt",placeholder:"What are in your mind...",onChange:function(e){return m(e.target.value)},value:o,required:!0})}),Object(t.jsxs)("div",{className:"create__second",children:[Object(t.jsxs)("div",{className:"create__second-a",children:[Object(t.jsx)("label",{htmlFor:"file",children:Object(t.jsx)(l.a,{className:"camera"})}),Object(t.jsx)("input",{type:"file",className:"file",onChange:function(e){p(e.target.files[0])},id:"file",required:!0})]}),Object(t.jsx)("div",{className:"create__second-b",children:Object(t.jsx)("input",{type:"submit",value:"Create",className:"btn-sweet"})})]})]})}):""})},C=function(e){var a=c.a.useContext(O),s=a.loader,n=a.user,i=a.publishComment,r=c.a.useState(""),l=Object(u.a)(r,2),o=l[0],m=l[1],d=c.a.useState([]),j=Object(u.a)(d,2),b=j[0],g=j[1];return c.a.useEffect((function(){p.collection("posts").doc(e.id).collection("comments").orderBy("currentTime","desc").onSnapshot((function(e){g(e.docs.map((function(e){return e.data()})))}))}),[]),Object(t.jsxs)("div",{className:"comments",children:[b.map((function(e){return Object(t.jsxs)("div",{className:"comments__container",children:[Object(t.jsx)("div",{className:"comments__container-name",children:e.username}),Object(t.jsx)("div",{className:"comments__container-msg",children:e.comment})]},e.id)})),Object(t.jsx)("div",{className:"comments__section",children:!s&&n?Object(t.jsx)("form",{onSubmit:function(a){a.preventDefault(),i({id:e.id,comment:o}),m("")},children:Object(t.jsx)("input",{type:"text",className:"comment__input",placeholder:"Add a comment..",onChange:function(e){return m(e.target.value)},value:o,required:!0})}):""})]})},S=function(){var e=Object(n.useContext)(O).posts;return console.log("all posts",e),Object(t.jsx)(t.Fragment,{children:e?e.map((function(e){return Object(t.jsxs)("div",{className:"posts",children:[Object(t.jsxs)("div",{className:"posts__header",children:[Object(t.jsx)("div",{className:"posts__header-avator",children:e.username?e.username[0]:""}),Object(t.jsx)("div",{className:"posts__header-name",children:e.username})]}),Object(t.jsx)("div",{className:"posts__img",children:Object(t.jsx)("img",{src:e.image,alt:e.image})}),Object(t.jsx)(C,{id:e.id})]},e.id)})):""})},k=function(){var e=c.a.useContext(O),a=e.loader,s=e.user,n=!a&&s&&s.displayName?s.displayName:"",i=c.a.useState([{id:1,image:"/images/ahmed1.jpg",name:"XYZ"},{id:2,image:"/images/im1.png",name:"Ananya"},{id:1,image:"/images/shahid1.jpg",name:"Sam"}]),r=Object(u.a)(i,1)[0];return Object(t.jsxs)("div",{className:"sidebar",children:[!a&&s?Object(t.jsxs)("div",{className:"sidebar__user",children:[Object(t.jsx)("div",{className:"sidebar__user-avator",children:n[0]}),Object(t.jsx)("div",{className:"sidebar__user-name",children:n})]}):"",Object(t.jsxs)("div",{className:"sidebar__list",children:[Object(t.jsx)("h3",{children:"Suggestions for you"}),r.map((function(e){return Object(t.jsxs)("div",{className:"sidebar__list-user",children:[Object(t.jsxs)("div",{className:"sidebar__list-a",children:[Object(t.jsx)("div",{className:"sidebar__list-a-img",children:Object(t.jsx)("img",{src:e.image,alt:e.image})}),Object(t.jsx)("div",{className:"sidebar__list-a-name",children:e.name})]}),Object(t.jsx)("div",{className:"sidebar__list-b",children:Object(t.jsx)("a",{href:"",children:"Follow"})})]},e.id)}))]})]})};var A=function(){return Object(t.jsxs)(x,{children:[Object(t.jsx)(_,{}),Object(t.jsxs)("div",{className:"container",children:[Object(t.jsx)(y,{}),Object(t.jsx)(w,{}),Object(t.jsx)(S,{}),Object(t.jsx)(k,{})]}),Object(t.jsx)(N,{})]})};r.a.render(Object(t.jsx)(A,{}),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.c6570d97.chunk.js.map